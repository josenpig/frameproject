<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xingji.frameproject.mybatis.dao.CapitalPayableDao">
    <!-- 结果集 -->
    <resultMap type="com.xingji.frameproject.mybatis.entity.CapitalPayable" id="CapitalPayableMap">
        <result property="deliveryId" column="delivery_id" jdbcType="VARCHAR"/>
        <result property="deliveryTime" column="delivery_time" jdbcType="TIMESTAMP"/>
        <result property="vendor" column="vendor" jdbcType="VARCHAR"/>
        <result property="buyer" column="buyer" jdbcType="VARCHAR"/>
        <result property="payables" column="payables" jdbcType="NUMERIC"/>
        <result property="paid" column="paid" jdbcType="NUMERIC"/>
        <result property="unpaid" column="unpaid" jdbcType="NUMERIC"/>
        <result property="remarks" column="remarks" jdbcType="VARCHAR"/>
        <result property="founder" column="founder" jdbcType="VARCHAR"/>
        <result property="caseState" column="case_state" jdbcType="INTEGER"/>
        <result property="paymentRemark" column="payment_remark" jdbcType="VARCHAR"/>
        <result property="lastCollectionTime" column="last_collection_time" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!-- 基本字段 -->
    <sql id="Base_Column_List">
        delivery_id
        , delivery_time, vendor, buyer, payables, paid, unpaid, remarks, founder, case_state, payment_remark, last_collection_time    </sql>

    <!-- 查询单个 -->
    <select id="selectById" resultMap="CapitalPayableMap">
        select
        <include refid="Base_Column_List"/>
        from capital_payable
        where delivery_id = #{deliveryId}
    </select>

    <!-- 查询全部 -->
    <select id="selectAll" resultMap="CapitalPayableMap">
        select
        <include refid="Base_Column_List"/>
        from capital_payable
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="selectList" resultMap="CapitalPayableMap">
        select
        <include refid="Base_Column_List"/>
        from capital_payable
        <where>
            <if test="deliveryId != null and deliveryId != ''">
                and delivery_id = #{deliveryId}
            </if>
            <if test="deliveryTime != null">
                and delivery_time = #{deliveryTime}
            </if>
            <if test="vendor != null and vendor != ''">
                and vendor = #{vendor}
            </if>
            <if test="buyer != null and buyer != ''">
                and buyer = #{buyer}
            </if>
            <if test="payables != null">
                and payables = #{payables}
            </if>
            <if test="paid != null">
                and paid = #{paid}
            </if>
            <if test="unpaid != null">
                and unpaid = #{unpaid}
            </if>
            <if test="remarks != null and remarks != ''">
                and remarks = #{remarks}
            </if>
            <if test="founder != null and founder != ''">
                and founder = #{founder}
            </if>
            <if test="caseState != null">
                and case_state = #{caseState}
            </if>
            <if test="paymentRemark != null and paymentRemark != ''">
                and payment_remark = #{paymentRemark}
            </if>
            <if test="lastCollectionTime != null">
                and last_collection_time = #{lastCollectionTime}
            </if>
        </where>
    </select>

    <!-- 新增所有列 -->
    <insert id="insert" keyProperty="deliveryId" useGeneratedKeys="true">
        insert into capital_payable(delivery_id, delivery_time, vendor, buyer, payables, paid, unpaid, remarks, founder,
                                    case_state, payment_remark, last_collection_time)
        values (#{deliveryId}, #{deliveryTime}, #{vendor}, #{buyer}, #{payables}, #{paid}, #{unpaid}, #{remarks},
                #{founder}, #{caseState}, #{paymentRemark}, #{lastCollectionTime})
    </insert>

    <!-- 批量新增 -->
    <insert id="batchInsert">
        insert into capital_payable(delivery_id, delivery_time, vendor, buyer, payables, paid, unpaid, remarks, founder,
        case_state, payment_remark, last_collection_time)
        values
        <foreach collection="capitalPayables" item="item" index="index" separator=",">
            (
            #{item.deliveryId}, #{item.deliveryTime}, #{item.vendor}, #{item.buyer}, #{item.payables}, #{item.paid},
            #{item.unpaid}, #{item.remarks}, #{item.founder}, #{item.caseState}, #{item.paymentRemark},
            #{item.lastCollectionTime} )
        </foreach>
    </insert>

    <!-- 通过主键修改数据 -->
    <update id="update">
        update frameproject.capital_payable
        <set>
            <if test="deliveryTime != null">
                delivery_time = #{deliveryTime},
            </if>
            <if test="vendor != null and vendor != ''">
                vendor = #{vendor},
            </if>
            <if test="buyer != null and buyer != ''">
                buyer = #{buyer},
            </if>
            <if test="payables != null">
                payables = #{payables},
            </if>
            <if test="paid != null">
                paid = #{paid},
            </if>
            <if test="unpaid != null">
                unpaid = #{unpaid},
            </if>
            <if test="remarks != null and remarks != ''">
                remarks = #{remarks},
            </if>
            <if test="founder != null and founder != ''">
                founder = #{founder},
            </if>
            <if test="caseState != null">
                case_state = #{caseState},
            </if>
            <if test="paymentRemark != null and paymentRemark != ''">
                payment_remark = #{paymentRemark},
            </if>
            <if test="lastCollectionTime != null">
                last_collection_time = #{lastCollectionTime},
            </if>
        </set>
        where delivery_id = #{deliveryId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from capital_payable
        where delivery_id = #{deliveryId}
    </delete>

    <!-- 总数 -->
    <select id="count" resultType="int">
        select count(*)
        from capital_payable
    </select>
</mapper>
